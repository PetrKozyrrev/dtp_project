# —Ç–µ–ª–µ–≥—Ä–∞–º–º –±–æ—Ç

import re
import sqlite3
import matplotlib.pyplot as plt
import numpy as np
import telebot
from telebot import types
from buttons import *

TOKEN = '5006276068:AAHzWV1YyrukoIFA19lJ9987bXZg0-2j8V4'
region_lst = ["–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–¥—ã–≥–µ—è", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–ª—Ç–∞–π", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë–∞—à–∫–æ—Ä—Ç–æ—Å—Ç–∞–Ω", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è",
              "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –î–∞–≥–µ—Å—Ç–∞–Ω", \
              "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ò–Ω–≥—É—à–µ—Ç–∏—è", "–ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞–ª–º—ã–∫–∏—è",
              "–ö–∞—Ä–∞—á–∞–µ–≤–æ-–ß–µ—Ä–∫–µ—Å—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞", \
              "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞—Ä–µ–ª–∏—è", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–æ–º–∏", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–∞—Ä–∏–π –≠–ª", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–æ—Ä–¥–æ–≤–∏—è",
              "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–∞—Ö–∞",
              "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–µ–≤–µ—Ä–Ω–∞—è –û—Å–µ—Ç–∏—è", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢—ã–≤–∞", "–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞",
              "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –•–∞–∫–∞—Å–∏—è", \
              "–ß–µ—á–µ–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞", "–ß—É–≤–∞—à—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞", "–ê–ª—Ç–∞–π—Å–∫–∏–π –∫—Ä–∞–π", "–ó–∞–±–∞–π–∫–∞–ª—å—Å–∫–∏–π –∫—Ä–∞–π", "–ö–∞–º—á–∞—Ç—Å–∫–∏–π –∫—Ä–∞–π", \
              "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π", "–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π", "–ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π", "–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π", "–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –∫—Ä–∞–π",
              "–•–∞–±–∞—Ä–æ–≤—Å–∫–∏–π –∫—Ä–∞–π", \
              "–ê–º—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ê—Å—Ç—Ä–∞—Ö–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
              "–ë—Ä—è–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", \
              "–í–ª–∞–¥–∏–º–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–í–æ–ª–≥–æ–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–í–æ–ª–æ–≥–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
              "–ò–≤–∞–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", \
              "–ò—Ä–∫—É—Ç—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ö–∞–ª—É–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
              "–ö–∏—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", \
              "–ö–æ—Å—Ç—Ä–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ö—É—Ä–≥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ö—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
              "–õ–∏–ø–µ—Ü–∫–∞—è –æ–±–ª–∞—Å—Ç—å", \
              "–ú–∞–≥–∞–¥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ú—É—Ä–º–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
              "–ù–æ–≤–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", \
              "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–û–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–û—Ä–µ–Ω–±—É—Ä–≥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–û—Ä–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
              "–ü–µ–Ω–∑–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", \
              "–ü—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–†—è–∑–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–°–∞–º–∞—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
              "–°–∞—Ä–∞—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", \
              "–°–∞—Ö–∞–ª–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–°–º–æ–ª–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–¢–∞–º–±–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
              "–¢–≤–µ—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", \
              "–¢–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–¢—É–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–¢—é–º–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–£–ª—å—è–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", \
              "–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ú–æ—Å–∫–≤–∞", "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å", "–ï–≤—Ä–µ–π—Å–∫–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è –æ–±–ª–∞—Å—Ç—å", \
              "–ù–µ–Ω–µ—Ü–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥", "–•–∞–Ω—Ç—ã-–ú–∞–Ω—Å–∏–π—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥", "–ß—É–∫–æ—Ç—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥",
              "–Ø–º–∞–ª–æ-–ù–µ–Ω–µ—Ü–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥"]

conn = sqlite3.connect("dtp_data.db", check_same_thread=False)
cursor = conn.cursor()

bot = telebot.TeleBot(TOKEN)


@bot.message_handler(commands=['start', 'help'])
def start(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    menubutton1 = types.KeyboardButton('–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏')
    menubutton2 = types.KeyboardButton('–°—Ä–∞–≤–Ω–µ–Ω–∏–µ')
    markup.add(menubutton1, menubutton2)
    bot.send_message(message.chat.id, '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: \n 1. üìà –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ \n 2. üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ',
                     reply_markup=markup)


@bot.message_handler(content_types=["text"])
def bot_message(message):
    global region, region_1, region_2
    if message.text == "–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏":
        markup = types.ReplyKeyboardRemove()
        bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω:", reply_markup=markup)
        bot.send_message(message.chat.id, "1. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–¥—ã–≥–µ—è\n "
                                          "2. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–ª—Ç–∞–π\n"
                                          "3. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë–∞—à–∫–æ—Ä—Ç–æ—Å—Ç–∞–Ω\n"
                                          "4. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è\n"
                                          "5. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –î–∞–≥–µ—Å—Ç–∞–Ω\n"
                                          "6. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ò–Ω–≥—É—à–µ—Ç–∏—è\n"
                                          "7. –ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞\n"
                                          "8. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞–ª–º—ã–∫–∏—è\n"
                                          "9. –ö–∞—Ä–∞—á–∞–µ–≤–æ-–ß–µ—Ä–∫–µ—Å—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞\n"
                                          "10. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞—Ä–µ–ª–∏—è\n"
                                          "11. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–æ–º–∏\n"
                                          "12. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º\n"
                                          "13. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–∞—Ä–∏–π –≠–ª\n"
                                          "14. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–æ—Ä–¥–æ–≤–∏—è\n"
                                          "15. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–∞—Ö–∞\n"
                                          "16. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–µ–≤–µ—Ä–Ω–∞—è –û—Å–µ—Ç–∏—è\n"
                                          "17. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω\n"
                                          "18. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢—ã–≤–∞\n"
                                          "19. –£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞\n"
                                          "20. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –•–∞–∫–∞—Å–∏—è\n"
                                          "21. –ß–µ—á–µ–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞\n"
                                          "22. –ß—É–≤–∞—à—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞\n"
                                          "23. –ê–ª—Ç–∞–π—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "24. –ó–∞–±–∞–π–∫–∞–ª—å—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "25. –ö–∞–º—á–∞—Ç—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "26. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "27. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "28. –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "29. –ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "30. –°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "31. –•–∞–±–∞—Ä–æ–≤—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "32. –ê–º—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "33. –ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "34. –ê—Å—Ç—Ä–∞—Ö–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "35. –ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "36. –ë—Ä—è–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "37. –í–ª–∞–¥–∏–º–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "38. –í–æ–ª–≥–æ–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "39. –í–æ–ª–æ–≥–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "40. –í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "41. –ò–≤–∞–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "42. –ò—Ä–∫—É—Ç—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "43. –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "44. –ö–∞–ª—É–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "45. –ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "46. –ö–∏—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "47. –ö–æ—Å—Ç—Ä–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "48. –ö—É—Ä–≥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "49. –ö—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "50. –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "51. –õ–∏–ø–µ—Ü–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "52. –ú–∞–≥–∞–¥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "53. –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "54. –ú—É—Ä–º–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "55. –ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "56. –ù–æ–≤–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "57. –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "58. –û–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "59. –û—Ä–µ–Ω–±—É—Ä–≥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "60. –û—Ä–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "61. –ü–µ–Ω–∑–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "62. –ü—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "63. –†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "64. –†—è–∑–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "65. –°–∞–º–∞—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "66. –°–∞—Ä–∞—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "67. –°–∞—Ö–∞–ª–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "68. –°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "69. –°–º–æ–ª–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "70. –¢–∞–º–±–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "71. –¢–≤–µ—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "72. –¢–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "73. –¢—É–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "74. –¢—é–º–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "75. –£–ª—å—è–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "76. –ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "77. –Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "78. –ú–æ—Å–∫–≤–∞\n"
                                          "79. –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥\n"
                                          "80. –°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å\n"
                                          "81. –ï–≤—Ä–µ–π—Å–∫–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "82. –ù–µ–Ω–µ—Ü–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥\n"
                                          "83. –•–∞–Ω—Ç—ã-–ú–∞–Ω—Å–∏–π—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥\n"
                                          "84. –ß—É–∫–æ—Ç—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥\n"
                                          "85. –Ø–º–∞–ª–æ-–ù–µ–Ω–µ—Ü–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥\n", reply_markup=markup)
    elif message.text in region_lst:
        region = message.text
        bot.send_message(message.chat.id, "–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD –∏–ª–∏ YYYY-MM –∏–ª–∏ YYYY")
    elif re.fullmatch(r"(\d{4}-\d{1,2}-\d{1,2})", message.text) \
            or re.fullmatch(r"(\d{4}-\d{1,2})", message.text) or re.fullmatch(r"(\d{4})", message.text):
        sql = f"SELECT SUM(dead_count),SUM(injured_count),COUNT(tags) FROM data WHERE region = '{region}' AND datetime LIKE '{message.text}%'"
        cursor.execute(sql)
        a = cursor.fetchall()
        sql = "SELECT category FROM data GROUP BY category ORDER BY COUNT(*) DESC LIMIT 1"
        cursor.execute(sql)
        b = cursor.fetchall()
        sql = "SELECT light FROM data GROUP BY light ORDER BY COUNT(*) DESC LIMIT 1"
        cursor.execute(sql)
        c = cursor.fetchall()
        sql = "SELECT weather FROM data GROUP BY weather ORDER BY COUNT(*) DESC LIMIT 1"
        cursor.execute(sql)
        d = cursor.fetchall()
        bot.send_message(message.chat.id, f"–í —Ä–µ–≥–∏–æ–Ω–µ {region} –∑–∞ {message.text}:\n"
                                          f"–°–º–µ—Ä—Ç–Ω–æ—Å—Ç—å –≤ –¥—Ç–ø: {a[0][0]}\n"
                                          f"–†–∞–Ω–µ–Ω—ã–µ: {a[0][1]}\n"
                                          f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ç–ø: {a[0][2]}\n"
                                          f"–ù–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç—ã–π —Ç–∏–ø –¥—Ç–ø: {b[0][0]}\n"
                                          f"–í—Ä–µ–º—è —Å—É—Ç–æ–∫ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª-–≤–æ–º –¥—Ç–ø: {c[0][0]}\n"
                                          f"–í –∫–∞–∫—É—é –ø–æ–≥–æ–¥—É –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –¥—Ç–ø: {d[0][0]}")

    if message.text == "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ":
        markup = types.ReplyKeyboardRemove()
        bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è\n"
                                          "–ü—Ä–∏–º–µ—Ä –≤–≤–æ–¥–∞: –ú–æ—Å–∫–≤–∞ –∏ –°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å", reply_markup=markup)
        bot.send_message(message.chat.id, "1. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–¥—ã–≥–µ—è\n "
                                          "2. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–ª—Ç–∞–π\n"
                                          "3. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë–∞—à–∫–æ—Ä—Ç–æ—Å—Ç–∞–Ω\n"
                                          "4. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è\n"
                                          "5. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –î–∞–≥–µ—Å—Ç–∞–Ω\n"
                                          "6. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ò–Ω–≥—É—à–µ—Ç–∏—è\n"
                                          "7. –ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞\n"
                                          "8. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞–ª–º—ã–∫–∏—è\n"
                                          "9. –ö–∞—Ä–∞—á–∞–µ–≤–æ-–ß–µ—Ä–∫–µ—Å—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞\n"
                                          "10. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞—Ä–µ–ª–∏—è\n"
                                          "11. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–æ–º–∏\n"
                                          "12. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º\n"
                                          "13. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–∞—Ä–∏–π –≠–ª\n"
                                          "14. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–æ—Ä–¥–æ–≤–∏—è\n"
                                          "15. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–∞—Ö–∞\n"
                                          "16. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–µ–≤–µ—Ä–Ω–∞—è –û—Å–µ—Ç–∏—è\n"
                                          "17. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω\n"
                                          "18. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢—ã–≤–∞\n"
                                          "19. –£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞\n"
                                          "20. –†–µ—Å–ø—É–±–ª–∏–∫–∞ –•–∞–∫–∞—Å–∏—è\n"
                                          "21. –ß–µ—á–µ–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞\n"
                                          "22. –ß—É–≤–∞—à—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞\n"
                                          "23. –ê–ª—Ç–∞–π—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "24. –ó–∞–±–∞–π–∫–∞–ª—å—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "25. –ö–∞–º—á–∞—Ç—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "26. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "27. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "28. –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "29. –ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "30. –°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "31. –•–∞–±–∞—Ä–æ–≤—Å–∫–∏–π –∫—Ä–∞–π\n"
                                          "32. –ê–º—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "33. –ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "34. –ê—Å—Ç—Ä–∞—Ö–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "35. –ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "36. –ë—Ä—è–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "37. –í–ª–∞–¥–∏–º–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "38. –í–æ–ª–≥–æ–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "39. –í–æ–ª–æ–≥–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "40. –í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "41. –ò–≤–∞–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "42. –ò—Ä–∫—É—Ç—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "43. –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "44. –ö–∞–ª—É–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "45. –ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "46. –ö–∏—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "47. –ö–æ—Å—Ç—Ä–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "48. –ö—É—Ä–≥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "49. –ö—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "50. –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "51. –õ–∏–ø–µ—Ü–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "52. –ú–∞–≥–∞–¥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "53. –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "54. –ú—É—Ä–º–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "55. –ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "56. –ù–æ–≤–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "57. –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "58. –û–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "59. –û—Ä–µ–Ω–±—É—Ä–≥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "60. –û—Ä–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "61. –ü–µ–Ω–∑–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "62. –ü—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "63. –†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "64. –†—è–∑–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "65. –°–∞–º–∞—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "66. –°–∞—Ä–∞—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "67. –°–∞—Ö–∞–ª–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "68. –°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "69. –°–º–æ–ª–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "70. –¢–∞–º–±–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "71. –¢–≤–µ—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "72. –¢–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "73. –¢—É–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "74. –¢—é–º–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "75. –£–ª—å—è–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "76. –ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "77. –Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "78. –ú–æ—Å–∫–≤–∞\n"
                                          "79. –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥\n"
                                          "80. –°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å\n"
                                          "81. –ï–≤—Ä–µ–π—Å–∫–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è –æ–±–ª–∞—Å—Ç—å\n"
                                          "82. –ù–µ–Ω–µ—Ü–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥\n"
                                          "83. –•–∞–Ω—Ç—ã-–ú–∞–Ω—Å–∏–π—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥\n"
                                          "84. –ß—É–∫–æ—Ç—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥\n"
                                          "85. –Ø–º–∞–ª–æ-–ù–µ–Ω–µ—Ü–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥\n", reply_markup=markup)
    elif re.search(r"(\D –∏ \D)", message.text):
        region_1, region_2 = message.text.split(" –∏ ")
        bot.send_message(message.chat.id, "–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—ã\n"
                                          "–ù–∞–ø—Ä–∏–º–µ—Ä 2017 –∏ 2021; 2015-09-01 –∏ 2018-03-05")
    elif re.fullmatch(r"(\d{4}-\d{1,2}-\d{1,2}) –∏ (\d{4}-\d{1,2}-\d{1,2})", message.text) \
            or re.fullmatch(r"(\d{4}-\d{1,2}) –∏ (\d{4}-\d{1,2})", message.text) \
            or re.fullmatch(r"(\d{4} –∏ \d{4})", message.text):
        datetime_1, datetime_2 = message.text.split(" –∏ ")
        sql1 = f"SELECT SUM(dead_count),SUM(injured_count),COUNT(tags) FROM data WHERE region = '{region_1}' AND datetime LIKE '{datetime_1}%'"
        cursor.execute(sql1)
        st1 = cursor.fetchall()
        sql2 = f"SELECT SUM(dead_count),SUM(injured_count),COUNT(tags) FROM data WHERE region = '{region_2}' AND datetime LIKE '{datetime_2}%'"
        cursor.execute(sql2)
        st2 = cursor.fetchall()

        bot.send_message(message.chat.id, f"–í —Ä–µ–≥–∏–æ–Ω–µ {region_1} –∑–∞ {datetime_1}:\n"
                                          f"–°–º–µ—Ä—Ç–Ω–æ—Å—Ç—å –≤ –¥—Ç–ø: {st1[0][0]}\n"
                                          f"–†–∞–Ω–µ–Ω—ã–µ: {st1[0][1]}\n"
                                          f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ç–ø: {st1[0][2]}\n"
                                          f"\n"
                                          f"–í —Ä–µ–≥–∏–æ–Ω–µ {region_2} –∑–∞ {datetime_2}:\n"
                                          f"–°–º–µ—Ä—Ç–Ω–æ—Å—Ç—å –≤ –¥—Ç–ø: {st2[0][0]}\n"
                                          f"–†–∞–Ω–µ–Ω—ã–µ: {st2[0][1]}\n"
                                          f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ç–ø: {st2[0][2]}\n")

        labels = ['–ö–æ–ª-–≤–æ —Å–º–µ—Ä—Ç–µ–π', '–ö–æ–ª-–≤–æ —Ä–∞–Ω–µ–Ω—ã—Ö', '–ö–æ–ª-–≤–æ –¥—Ç–ø']

        x = np.arange(len(labels))  # the label locations
        width = 0.35  # the width of the bars

        fig, ax = plt.subplots()
        rects1 = ax.bar(x - width / 2, st1[0], width, label=f'{region_1} {datetime_1}')
        rects2 = ax.bar(x + width / 2, st2[0], width, label=f'{region_2} {datetime_2}')

        ax.set_xticks(x, labels)
        ax.legend(loc='upper left')

        ax.bar_label(rects1, padding=3)
        ax.bar_label(rects2, padding=3)

        fig.tight_layout()
        plt.savefig('img/1.png')

        bot.send_photo(message.chat.id, open("img/1.png", 'rb'))


bot.polling(none_stop=True)
